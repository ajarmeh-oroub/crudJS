<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table{
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="cont">
        <h1>CRUD Application with local storage</h1>

        <br>
        <label> Name:</label>
        <input type="text" placeholder="Enter name" id="name">
        
        <label> Age:</label>
        <input type="text" placeholder="Enter name" id="age">
       
        <label> Address:</label>
        <input type="text" placeholder="Enter name" id="add">
        <label> Email:</label>
        <input type="text" placeholder="Enter name" id="email">

        <button onclick="add()"  style="background-color: green;"> ADD</button>
       
<br>
<br>
        <table id="table"  border="1px">
            <tr>
            <th>Name</th>
            <th>Age</th>
            <th>Address</th>
            <th>Email</th>
            <th>Action</th>
        </tr>
        </table>
        <br>
    </div>
    <script>


        function add(){
            var name = document.getElementById('name').value
            var  age= document.getElementById('age').value
            var address =document.getElementById('add').value
            var email= document.getElementById('email').value

         var info={
            name : name ,
            age: age,
            address : address ,
            email : email 
         }
localStorage.setItem(name , JSON.stringify(info))


        }
      

        for(let i=0 ; i<localStorage.length; i++){
            var key = localStorage.key(i);
           var storedData = JSON.parse(localStorage.getItem(key));
            var mytable = document.getElementById('table')
     var myrow= document.createElement('tr')
     myrow.innerHTML=`<td>${storedData.name}</td>
     <td>${storedData.age}</td>
     <td>${storedData.address}</td> 
      <td>${storedData.email}</td>
      <td><button onclick="delete1('${key}')"  style="background-color: red;"> Delete</button> <button onclick="edit('${key}')"  style="background-color: blue;"> Edit</button> <button onclick=" saveedits('${key}')"  style="background-color: green;"> save</button></td>`

      mytable.append(myrow)
        }

  function delete1(key){
    localStorage.removeItem(key);

    
  }

  function edit(key){
    
    var storedData= JSON.parse(localStorage.getItem(key))
    document.getElementById('name').value = storedData.name;
  
    document.getElementById('name').disabled=true
    document.getElementById('age').value = storedData.age; 
    document.getElementById('add').value = storedData.address; 
    document.getElementById('email').value = storedData.email; 

  
  

  }
function  saveedits(key){
    var newname = document.getElementById('name').value;  
    var newage = document.getElementById('age').value;
    var newaddress = document.getElementById('add').value;
    var newemail = document.getElementById('email').value;
    var updatedData = {
        name: newname,
        age: newage,
        address: newaddress,
        email: newemail
    };
    localStorage.setItem(key, JSON.stringify(updatedData));


document.getElementById('name').disabled = false;

document.getElementById('name').value = '';
document.getElementById('age').value = '';
document.getElementById('add').value = '';
document.getElementById('email').value = '';

}
    </script>
</body>
</html>